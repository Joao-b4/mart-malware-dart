import 'dart:io';
import 'dart:async';

Socket socket;
ServerSocket serverSocket;

//InternetAddress.anyIPv4 = get ip now

void listen(){
  ServerSocket.bind("127.0.0.1", 6661).then(
    (ServerSocket server) {
      serverSocket = server;
      print("Server listen: ${serverSocket.address.address}:${serverSocket.port}");
      serverSocket.listen(
        _dataHandler, 
       onError: _errorHandler, 
       onDone: _successfulHandler, 
       cancelOnError: false,
       );
    }
  );
}

void _dataHandler(Socket client){
   print(client.remoteAddress.address);
   client.destroy();
}

void _errorHandler(dynamic errorObject, StackTrace stackError)
 => print("Error -> ${errorObject.toString}");

void _successfulHandler() => print("Done Connect!");