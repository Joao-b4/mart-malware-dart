import 'dart:async';
import 'dart:io';
import 'package:server/server.dart';
import '../lib/models/client.dart';

List<Client> clients = [];

List<Client> main() {
  Server.listen((Socket socketClient) {
    Client newClient = new Client(socketClient);
    newClient.listener((String message) {
      print(message);
    });
    clients.add(newClient);
    stdin.listen((data) =>
        newClient.sendMessage(new String.fromCharCodes(data).trim() + '\n\r'));
  });
  return clients;
}
